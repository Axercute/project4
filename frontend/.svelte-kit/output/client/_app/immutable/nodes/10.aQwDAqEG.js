import"../chunks/Bzak7iHL.js";import{i as ve}from"../chunks/BIIzcwk0.js";import{o as be}from"../chunks/D3iqVyHi.js";import{p as pe,aU as ue,aV as me,f as T,a as he,aw as x,h as e,b as L,c as fe,s as r,d as i,l as d,A as w,r as o,t as _e,e as C,w as E,aW as H,aX as h}from"../chunks/DLapP2ot.js";import{i as K}from"../chunks/BweEpFzG.js";import{e as ge,i as ye}from"../chunks/BaNpMgur.js";import{r as f}from"../chunks/BPzzhau8.js";import{b}from"../chunks/BM-KF4o3.js";import{g as xe}from"../chunks/B_39ON7K.js";function Q(S){return function(...N){var A=N[0];return A.preventDefault(),S==null?void 0:S.apply(this,N)}}var we=T('<tr class="bg-white hover:bg-gray-50"><td class="text-center space-y-2 border-b px-4 py-2"><button class="svelte-vbl3d1">Update</button> <button class="svelte-vbl3d1">Delete</button></td><td class="border-b px-4 py-2 text-center"> </td><td class="border-b px-4 py-2 text-center"> </td><td class="border-b px-4 py-2 text-center"> </td><td class="border-b px-4 py-2 text-center"> </td><td class="border-b px-4 py-2 text-center"> </td></tr>'),Se=T('<div class="modal svelte-vbl3d1"><div class="modal-content svelte-vbl3d1"><label for="modal-title" style="color: #941117;" class="svelte-vbl3d1">Edit Service</label> <form><label for="english_name" class="svelte-vbl3d1">English Name:</label> <input id="english_name" required class="svelte-vbl3d1"/> <label for="chinese_name" class="svelte-vbl3d1">Chinese Name:</label> <input id="chinese_name" required class="svelte-vbl3d1"/> <label for="category" class="svelte-vbl3d1">Category:</label> <input id="category" required class="svelte-vbl3d1"/> <label for="description" class="svelte-vbl3d1">Description:</label> <textarea id="description" class="svelte-vbl3d1"></textarea> <label for="starting_price" class="svelte-vbl3d1">Starting Price:</label> <input id="starting_price" required class="svelte-vbl3d1"/> <button type="submit" class="svelte-vbl3d1">Save</button> <button type="button" class="svelte-vbl3d1">Cancel</button></form></div></div>'),ke=T('<div class="modal svelte-vbl3d1"><div class="modal-content svelte-vbl3d1"><label for="modal-title" style="color: #941117;" class="svelte-vbl3d1">Add New Service</label> <form><label for="english_name" class="svelte-vbl3d1">English Name:</label> <input id="english_name" required class="svelte-vbl3d1"/> <label for="chinese_name" class="svelte-vbl3d1">Chinese Name:</label> <input id="chinese_name" required class="svelte-vbl3d1"/> <label for="category" class="svelte-vbl3d1">Category:</label> <input id="category" required class="svelte-vbl3d1"/> <label for="description" class="svelte-vbl3d1">Description:</label> <textarea id="description" class="svelte-vbl3d1"></textarea> <label for="starting_price" class="svelte-vbl3d1">Starting Price:</label> <input id="starting_price" required class="svelte-vbl3d1"/> <button type="submit" class="svelte-vbl3d1">Add Service</button> <button type="button" class="svelte-vbl3d1">Cancel</button></form></div></div>'),Ce=T('<div class="flex justify-end items-center mt-3 mr-4"><a href="#" class="text-red-600 hover:text-red-800">Log Out</a></div> <div class="flex justify-center my-4"><div class="flex flex-col space-y-2 w-full max-w-xs"><input type="text" placeholder="Search by English name" class="border p-2 rounded svelte-vbl3d1"/> <input type="text" placeholder="Search by category" class="border p-2 rounded svelte-vbl3d1"/></div></div> <div class="flex justify-center my-3"><button class="px-4 py-2 text-white svelte-vbl3d1">Add New Service</button></div> <div class="container mx-auto py-4 overflow-x-auto"><table class="min-w-full border-collapse border-l border-r border-black"><thead><tr class="bg-gray-100 border-t border-black"><th class="border-b px-4 py-2">Action</th><th class="border-b px-4 py-2">English Name</th><th class="border-b px-4 py-2">Chinese Name</th><th class="border-b px-4 py-2">Category</th><th class="border-b px-4 py-2">Description</th><th class="border-b px-4 py-2">Starting Price</th></tr></thead><tbody></tbody></table></div> <!> <!>',1);function Fe(S,N){pe(N,!1);const A=w();let _=w([]),q=w(""),$=w(""),j=w(!1),s=w(null),D=w(!1),n=w({english_name:"",chinese_name:"",category:"",description:"",starting_price:0});function R(){localStorage.removeItem("token"),window.location.href="/admin"}be(async()=>{const a=localStorage.getItem("token");if(!a){xe("/admin");return}const t=await fetch("http://localhost:3000/serviceManagement",{headers:{Authorization:`Bearer ${a}`}});if(t.status===401){window.location.href="/admin";return}if(!t.ok)throw new Error("Failed to load services data");d(_,await t.json()),console.log("Fetched services data:",e(_))});const Y=async()=>{const a=localStorage.getItem("token");if(!a){window.location.href="/admin";return}const t=await fetch("http://localhost:3000/serviceManagement",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(e(n))});if(t.ok){const c=await t.json();e(_).push(c),d(D,!1),console.log("New service added successfully")}else console.error("Failed to add service")};function Z(a){d(s,{...a}),d(j,!0)}function ee(){d(j,!1),d(s,null)}async function te(){const a=localStorage.getItem("token");if(!a){window.location.href="/admin";return}(await fetch(`http://localhost:3000/serviceManagement/${e(s)._id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(e(s))})).ok?(d(_,e(_).map(c=>c._id===e(s)._id?e(s):c)),d(j,!1),console.log("Service updated successfully")):console.error("Failed to update service")}async function ae(a){const t=localStorage.getItem("token");if(!t){window.location.href="/admin";return}(await fetch(`http://localhost:3000/serviceManagement/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(d(_,e(_).filter(v=>v._id!==a)),console.log("Service deleted successfully")):console.error("Failed to delete service")}ue(()=>(e(_),e(q),e($)),()=>{d(A,e(_).filter(a=>a.english_name.toLowerCase().includes(e(q).toLowerCase())&&a.category.toLowerCase().includes(e($).toLowerCase())))}),me(),ve();var O=Ce(),F=he(O),re=i(F);o(F);var M=r(F,2),U=i(M),P=i(U);f(P);var J=r(P,2);f(J),o(U),o(M);var z=r(M,2),le=i(z);o(z);var B=r(z,2),V=i(B),W=r(i(V));ge(W,5,()=>e(A),ye,(a,t)=>{var c=we(),v=i(c),m=i(v),g=r(m,2);o(v);var p=r(v),y=i(p,!0);o(p);var u=r(p),k=i(u,!0);o(u);var l=r(u),ne=i(l,!0);o(l);var I=r(l),ce=i(I,!0);o(I);var G=r(I),de=i(G);o(G),o(c),_e(()=>{C(y,(e(t),E(()=>e(t).english_name))),C(k,(e(t),E(()=>e(t).chinese_name))),C(ne,(e(t),E(()=>e(t).category))),C(ce,(e(t),E(()=>e(t).description))),C(de,`$${e(t),E(()=>e(t).starting_price)??""}`)}),x("click",m,()=>Z(e(t))),x("click",g,()=>ae(e(t)._id)),L(a,c)}),o(W),o(V),o(B);var X=r(B,2);{var se=a=>{var t=Se(),c=i(t),v=r(i(c),2),m=r(i(v),2);f(m);var g=r(m,4);f(g);var p=r(g,4);f(p);var y=r(p,4);H(y);var u=r(y,4);f(u);var k=r(u,4);o(v),o(c),o(t),b(m,()=>e(s).english_name,l=>h(s,e(s).english_name=l)),b(g,()=>e(s).chinese_name,l=>h(s,e(s).chinese_name=l)),b(p,()=>e(s).category,l=>h(s,e(s).category=l)),b(y,()=>e(s).description,l=>h(s,e(s).description=l)),b(u,()=>e(s).starting_price,l=>h(s,e(s).starting_price=l)),x("click",k,ee),x("submit",v,Q(te)),L(a,t)};K(X,a=>{e(j)&&a(se)})}var oe=r(X,2);{var ie=a=>{var t=ke(),c=i(t),v=r(i(c),2),m=r(i(v),2);f(m);var g=r(m,4);f(g);var p=r(g,4);f(p);var y=r(p,4);H(y);var u=r(y,4);f(u);var k=r(u,4);o(v),o(c),o(t),b(m,()=>e(n).english_name,l=>h(n,e(n).english_name=l)),b(g,()=>e(n).chinese_name,l=>h(n,e(n).chinese_name=l)),b(p,()=>e(n).category,l=>h(n,e(n).category=l)),b(y,()=>e(n).description,l=>h(n,e(n).description=l)),b(u,()=>e(n).starting_price,l=>h(n,e(n).starting_price=l)),x("click",k,()=>d(D,!1)),x("submit",v,Q(Y)),L(a,t)};K(oe,a=>{e(D)&&a(ie)})}x("click",re,R),b(P,()=>e(q),a=>d(q,a)),b(J,()=>e($),a=>d($,a)),x("click",le,()=>d(D,!0)),L(S,O),fe()}export{Fe as component};
