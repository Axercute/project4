import"../chunks/Bzak7iHL.js";import{p as ie,k as B,i as x,h as e,f as _,a as V,b as p,c as se,g as r,s,d as n,r as i,t as S,l as le}from"../chunks/DGYHhCVK.js";import{d as ne,s as b}from"../chunks/Bdp7olBi.js";import{i as X}from"../chunks/D88P7bS6.js";import{e as $,i as O}from"../chunks/D1Y47qj-.js";import{r as N}from"../chunks/BaNJaI3l.js";import{s as de}from"../chunks/Bjt-LPLC.js";import{b as A}from"../chunks/jT66NYJA.js";import"../chunks/BH3Xntre.js";import{D as G}from"../chunks/n6HvnmwO.js";var ce=(w,f,m)=>f(e(m)),me=_("<div> </div>"),ve=(w,f,m,F)=>{r(f,e(m),!0),r(F,!0)},fe=_("<li> </li>"),ue=_('<div class="bg-red-800 text-white text-md font-semibold rounded-xl p-4 shadow hover:bg-red-500 hover:cursor-pointer"><div class="mb-1 text-lg font-bold"> </div> <div class="mb-2 text-sm"> </div> <ol class="list-decimal list-inside text-green-400"></ol> <div class="flex-1 break-words"> </div> <div class="text-right text-md font-bold"> </div></div>'),xe=_('<input type="text" id="treatments" class="text-center text-black"/>'),pe=_('<label for="time" class="mb-2">Your name</label> <input type="text" id="time" class="text-center text-black"/> <label for="treatments" class="mb-2">Appointment Time</label> <input type="text" id="treatments" class="text-center text-black"/> <label for="treatments" class="mb-2">Treatments</label> <!> <label for="extraComments" class="mb-2">Comments</label> <textarea id="extraComments" class="text-black bg-white rounded flex mb-2 border-2 border-transparent focus:border-emerald-900 focus:outline-none focus:border-2 focus-within:bg-amber-400 font-semibold h-20 w-50"></textarea> <label for="extraComments" class="mb-2">Price, do not place "$"</label> <input type="text" id="extraComments" class="text-center text-black"/>',1),be=(w,f,m)=>{f(w.target.textContent),m(w.target.textContent)},_e=_('<button type="button" class="bg-red-400 hover:bg-green-400 w-full rounded-xl py-2"> </button>'),he=_(`<div class="flex flex-col items-center justify-center fixed
         top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2
         bg-[#7d1b1f] rounded-2xl text-white font-semibold p-4 border-2 border-white
         max-w-[90vw] min-w-[350px] md:min-w-[500px]
         max-h-[80vh] overflow-auto text-center transition-all duration-300 ease-in-out"><div class="w-full flex flex-col justify-center items-center"><div class="font-bold text-white text-lg break-words"> </div></div> <!> <div class="flex flex-col gap-2 mt-3 py-2 w-full"></div></div>`),we=_('<div class="flex flex-wrap justify-center mt-3"></div> <div class="w-full flex justify-center px-4"><div class="w-full max-w-4xl flex flex-col gap-4 mt-5"></div></div> <!>',1);function Ae(w,f){ie(f,!0);let m=B(f.data.customers.sort((t,a)=>new Date(t.date)-new Date(a.date))),F=[...new Set(m.map(t=>G.fromISO(t.date).toFormat("dd MMMM yyyy")))],E=x(B(F[0])),H=x(B(m.filter(t=>G.fromISO(t.date).toFormat("dd MMMM yyyy")===e(E)))),I=x(!1),D=x(""),T=x(""),P=x(""),W=x(!1),l=x("");const Z=t=>{r(E,t,!0),r(H,m.filter(a=>G.fromISO(a.date).toFormat("dd MMMM yyyy")===e(E)),!0)},q=()=>{r(T,["Make changes","Complete it","Delete it","Cancel"],!0),r(D,"What would you like to do with this appointment?")};q();const ee=t=>{t==="Make changes"&&(r(D,"What would you like to change"),r(W,!0),r(l,{...e(P)},!0),r(T,["Confirm changes","Cancel"],!0)),t==="Complete it"&&(r(D,"Are you sure you would like to complete? The purchase amount will be reflected to the boss"),r(T,["Confirm complete","Cancel"],!0)),t==="Delete it"&&(r(D,"Are you sure you would like to delete it? Nobody will be able to get it back"),r(T,["Confirm delete","Cancel"],!0)),t==="Cancel"&&(r(I,!1),q(),r(W,!1))},te=async t=>{if(t==="Confirm delete"&&(r(I,""),q(),await(await fetch(`/api/appointment/${e(P)._id}`,{method:"DELETE"})).json(),window.location.reload()),t==="Confirm changes"){const o=await(await fetch(`/api/appointment/${e(l)._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e(l))})).json();console.log(o),window.location.reload()}};var K=we(),J=V(K);$(J,21,()=>F,O,(t,a)=>{var o=me();o.__click=[ce,Z,a];var u=n(o,!0);i(o),S(()=>{de(o,1,`px-4 py-2 font-semibold bg-red-400 border border-black text-white hover:cursor-pointer
      ${e(E)==e(a)?"bg-red-800":"text-red-800"} hover:cursor-pointer hover:bg-red-500`),b(u,e(a))}),p(t,o)}),i(J);var L=s(J,2),Q=n(L);$(Q,21,()=>e(H),O,(t,a)=>{var o=ue();o.__click=[ve,P,a,I];var u=n(o),R=n(u,!0);i(u);var g=s(u,2),Y=n(g,!0);i(g);var y=s(g,2);$(y,21,()=>e(a).treatments,O,(C,j)=>{var M=fe(),c=n(M,!0);i(M),S(()=>b(c,e(j).english_name)),p(C,M)}),i(y);var v=s(y,2),k=n(v);i(v);var d=s(v,2),h=n(d);i(d),i(o),S(C=>{b(R,e(a).name),b(Y,e(a).time),b(k,`Comment: ${e(a).extraComments??""}`),b(h,`Total price roughly: $${C??""}`)},[()=>e(a).price.toFixed(2)]),p(t,o)}),i(Q),i(L);var ae=s(L,2);{var re=t=>{var a=he(),o=n(a),u=n(o),R=n(u,!0);i(u),i(o);var g=s(o,2);{var Y=v=>{var k=pe(),d=s(V(k),2);N(d);var h=s(d,4);N(h);var C=s(h,4);$(C,17,()=>e(l).treatments,O,(c,U,ge)=>{var z=xe();N(z),A(z,()=>e(U).english_name,oe=>e(U).english_name=oe),p(c,z)});var j=s(C,4);le(j);var M=s(j,4);N(M),A(d,()=>e(l).name,c=>e(l).name=c),A(h,()=>e(l).time,c=>e(l).time=c),A(j,()=>e(l).extraComments,c=>e(l).extraComments=c),A(M,()=>e(l).price,c=>e(l).price=c),p(v,k)};X(g,v=>{e(W)&&v(Y)})}var y=s(g,2);$(y,21,()=>e(T),O,(v,k)=>{var d=_e();d.__click=[be,ee,te];var h=n(d,!0);i(d),S(()=>b(h,e(k))),p(v,d)}),i(y),i(a),S(()=>b(R,e(D))),p(t,a)};X(ae,t=>{e(I)&&t(re)})}p(w,K),se()}ne(["click"]);export{Ae as component};
