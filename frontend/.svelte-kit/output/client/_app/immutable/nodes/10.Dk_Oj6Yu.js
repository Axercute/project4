import"../chunks/CWj6FrbW.js";import"../chunks/EsMjB-o5.js";import{o as F}from"../chunks/DDNJlhGV.js";import{p as M,f as b,b as _,c as z,s,d as o,h as g,m as B,i as e,r as a,t as C,e as d,V as N}from"../chunks/DGUbBfuZ.js";import{e as j,i as I}from"../chunks/BODkbvgv.js";import{i as L}from"../chunks/DFue-NaN.js";import{g as P}from"../chunks/B0lz7bPj.js";var T=b("<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td><button>Delete</button></td></tr>"),V=b("<table><thead><tr><th>English Name</th><th>Chinese Name</th><th>Category</th><th>Description</th><th>Starting Price</th><th>Action</th></tr></thead><tbody></tbody></table>");function R(w,x){M(x,!1);let i=B([]);F(async()=>{const r=localStorage.getItem("token");if(!r){P("/admin");return}const t=await fetch("http://localhost:3000/serviceManagement",{headers:{Authorization:`Bearer ${r}`}});if(t.status===401){window.location.href="/admin";return}if(!t.ok)throw new Error("Failed to load services data");g(i,await t.json()),console.log("Fetched services data:",e(i))});async function y(r){const t=localStorage.getItem("token");if(!t){window.location.href="/admin";return}(await fetch(`http://localhost:3000/serviceManagement/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(g(i,e(i).filter(n=>n._id!==r)),console.log("Service deleted successfully")):console.error("Failed to delete service")}L();var l=V(),u=s(o(l));j(u,5,()=>e(i),I,(r,t)=>{var c=T(),n=o(c),k=o(n,!0);a(n);var h=s(n),E=o(h,!0);a(h);var m=s(h),S=o(m,!0);a(m);var f=s(m),$=o(f,!0);a(f);var p=s(f),A=o(p);a(p);var v=s(p),D=o(v);a(v),a(c),C(()=>{d(k,e(t).english_name),d(E,e(t).chinese_name),d(S,e(t).category),d($,e(t).description),d(A,`$${e(t).starting_price??""}`)}),N("click",D,()=>y(e(t)._id)),_(r,c)}),a(u),a(l),_(w,l),z()}export{R as component};
