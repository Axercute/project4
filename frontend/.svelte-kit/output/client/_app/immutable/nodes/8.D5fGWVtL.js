import"../chunks/Bzak7iHL.js";import{p as ne,k as H,i as u,h as e,f as x,a as Y,b,c as le,g as i,s as n,d as l,r as s,t as O,l as ce}from"../chunks/DGYHhCVK.js";import{d as de,s as _}from"../chunks/Bdp7olBi.js";import{i as Z}from"../chunks/D88P7bS6.js";import{e as P,i as J}from"../chunks/D1Y47qj-.js";import{r as W}from"../chunks/BaNJaI3l.js";import{s as ve}from"../chunks/Bjt-LPLC.js";import{a as fe,b as F}from"../chunks/jT66NYJA.js";var ue=(h,c,p)=>c(e(p)),pe=x("<div> </div>"),me=(h,c,p,w)=>{i(c,e(p),!0),i(w,!0)},be=x('<div class="bg-red-800 text-white text-md font-semibold rounded-xl p-4 shadow hover:cursor-pointer hover:bg-red-500"><div class="mb-1 text-lg font-bold"> </div> <div class="mb-2 text-sm"> </div> <div class="text-right text-md font-bold"> </div></div>'),_e=x('<label class="- hover:cursor-pointer"><input type="radio" class="mt-2"/> </label>'),xe=x('<label for="time" class="mb-2">English Name</label> <input type="text" id="time" class="text-center text-black"/> <label for="time" class="mb-2">Chinese Name</label> <input type="text" id="time" class="text-center text-black"/> <label for="description" class="mb-2">Treatment description</label> <textarea id="description" class="text-black bg-white rounded flex mb-2 border-2 border-transparent focus:border-emerald-900 focus:outline-none focus:border-2 focus-within:bg-amber-400 font-semibold h-20 w-50"></textarea> <!> <label for="extraComments" class="mb-2">Price, do not place "$"</label> <input type="text" id="extraComments" class="text-center text-black"/>',1),he=(h,c,p)=>{c(h.target.textContent),p(h.target.textContent)},ge=x('<button type="button" class="bg-red-400 hover:bg-green-400 w-full rounded-xl py-2"> </button>'),we=x(`<div class="flex flex-col items-center justify-center fixed
         top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2
         bg-[#7d1b1f] rounded-2xl text-white font-semibold p-4 border-2 border-white
         max-w-[90vw] min-w-[350px] md:min-w-[500px]
         max-h-[80vh] overflow-auto text-center transition-all duration-300 ease-in-out"><div class="w-full flex flex-col justify-center items-center"><div class="font-bold text-white text-lg break-words"> </div></div> <!> <div class="flex flex-col gap-2 mt-3 py-2 w-full"></div></div>`),ye=x('<div class="flex flex-wrap justify-center mt-3"></div> <div class="w-full flex justify-center px-4"><div class="w-full max-w-4xl flex flex-col gap-4 mt-5"></div></div> <!>',1);function Me(h,c){ne(c,!0);const p=[];let w=H([...new Set(c.data.services.map(t=>t.category).filter(t=>t!=="Featured Treatment"&&t!=="Consultation"))]),S=u(H(w[0])),I=u(H(c.data.services.filter(t=>t.category===e(S))));const ee=t=>{i(S,t,!0),i(I,c.data.services.filter(a=>a.category===e(S)),!0)};let D=u(!1),y=u(""),k=u(""),E=u(""),o=u(""),M=u(!1);const L=()=>{i(k,["Make changes","Add new treatment","Delete it","Cancel"],!0),i(y,"What would you like to do with this treatment?")};L();const te=t=>{t==="Make changes"&&(i(y,"What would you like to change"),i(M,!0),i(o,{...e(E)},!0),i(k,["Confirm changes","Cancel"],!0)),t==="Add new treatment"&&(i(y,"Please fill in the form on the treatment to add"),i(M,!0),i(o,Object.fromEntries(Object.entries(e(E)).map(([a,r])=>[a,a==="category"?r:""])),!0),i(k,["Confirm new treatment","Cancel"],!0)),t==="Delete it"&&(i(y,"Are you sure you would like to delete it? Nobody will be able to get it back"),i(k,["Confirm delete","Cancel"],!0)),t==="Cancel"&&(i(D,!1),L(),i(M,!1))},ae=async t=>{if(t==="Confirm delete"&&(i(D,""),L(),await(await fetch(`/api/service/${e(E)._id}`,{method:"DELETE"})).json(),window.location.reload()),t==="Confirm changes"){const r=await(await fetch(`/api/service/${e(o)._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e(o))})).json();console.log(r),window.location.reload()}if(t==="Confirm new treatment"){const r=await(await fetch("/api/service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e(o))})).json();console.log(r),window.location.reload()}};var K=ye(),R=Y(K);P(R,21,()=>w,J,(t,a)=>{var r=pe();r.__click=[ue,ee,a];var v=l(r,!0);s(r),O(()=>{ve(r,1,`px-4 py-2 font-semibold bg-red-400 border border-black text-white
          ${e(S)===e(a)?"bg-red-800":"text-red-800"} 
          hover:cursor-pointer hover:bg-red-500`),_(v,e(a))}),b(t,r)}),s(R);var $=n(R,2),Q=l($);P(Q,21,()=>e(I),J,(t,a)=>{var r=be();r.__click=[me,E,a,D];var v=l(r),q=l(v,!0);s(v);var g=n(v,2),z=l(g,!0);s(g);var C=n(g,2),m=l(C);s(C),s(r),O(()=>{_(q,e(a).english_name),_(z,e(a).description),_(m,`$${e(a).starting_price??""}`)}),b(t,r)}),s(Q),s($);var re=n($,2);{var ie=t=>{var a=we(),r=l(a),v=l(r),q=l(v,!0);s(v),s(r);var g=n(r,2);{var z=m=>{var N=xe(),f=n(Y(N),2);W(f);var j=n(f,4);W(j);var B=n(j,4);ce(B);var U=n(B,2);P(U,17,()=>w,J,(d,A)=>{var G=_e(),T=l(G);W(T);var X,oe=n(T);s(G),O(()=>{X!==(X=e(A))&&(T.value=(T.__value=e(A))??""),_(oe,` ${e(A)??""}`)}),fe(p,[],T,()=>(e(A),e(o).category),se=>e(o).category=se),b(d,G)});var V=n(U,4);W(V),F(f,()=>e(o).english_name,d=>e(o).english_name=d),F(j,()=>e(o).chinese_name,d=>e(o).chinese_name=d),F(B,()=>e(o).description,d=>e(o).description=d),F(V,()=>e(o).starting_price,d=>e(o).starting_price=d),b(m,N)};Z(g,m=>{e(M)&&m(z)})}var C=n(g,2);P(C,21,()=>e(k),J,(m,N)=>{var f=ge();f.__click=[he,te,ae];var j=l(f,!0);s(f),O(()=>_(j,e(N))),b(m,f)}),s(C),s(a),O(()=>_(q,e(y))),b(t,a)};Z(re,t=>{e(D)&&t(ie)})}b(h,K),le()}de(["click"]);export{Me as component};
