import"../chunks/CWj6FrbW.js";import{o as Te}from"../chunks/DDNJlhGV.js";import{g as we,f as B,h as T,m as xe,d as H,t as ne,b as Z,s as A,i as r,r as S,e as ae,v as Oe,p as Ce,l as L,ar as K,V as Pe,c as Ye,u as F,a$ as je,n as Ae}from"../chunks/DGUbBfuZ.js";import{e as me,i as ve}from"../chunks/BODkbvgv.js";import{r as ge}from"../chunks/DuOWvoEr.js";import{b as _e,a as He}from"../chunks/B1lP4TFf.js";import{g as Ne}from"../chunks/B0lz7bPj.js";import"../chunks/EsMjB-o5.js";import{i as Me}from"../chunks/EtgRPtOJ.js";import{s as Se}from"../chunks/HldVw0Pv.js";import{p as re}from"../chunks/KOxa7oZM.js";const $e={consultation:[{english_name:"First",chinese_name:"初诊",description:"first",price:28},{english_name:"Follow-up",chinese_name:"复诊",description:"followup",price:18}]};var Ee=(p,_)=>T(_,!r(_)),We=(p,_,D,f,w)=>{_(r(D)),f(r(D)),T(w,!1)},Le=B('<div class="px-4 py-1 text-center hover:bg-amber-400 cursor-pointer"> </div>'),qe=B('<div class="absolute w-full z-50 bg-white mt-1 shadow"></div>'),Fe=B('<div class="w-50 mx-auto relative"><div> </div> <div class="relative"><!></div></div>');function be(p,_){let D=re(_,"value",12),f=xe(!1),w=re(_,"selected",12),P=re(_,"options",24,()=>[]);var $=Fe(),m=H($);m.__click=[Ee,f];var Y=H(m,!0);S(m);var y=A(m,2),N=H(y);{var b=j=>{var g=qe();me(g,5,P,ve,(k,E)=>{var M=Le();M.__click=[We,w,E,D,f];var Q=H(M,!0);S(M),ne(()=>ae(Q,r(E))),Z(k,M)}),S(g),Z(j,g)};Me(N,j=>{r(f)&&j(b)})}S(y),S($),ne(()=>{Se(m,1,`w-full px-4 py-2 border rounded text-center hover:cursor-pointer ${r(f)?"bg-amber-400":"bg-white"}`),ae(Y,w())}),Z(p,$)}we(["click"]);var Ie=(p,_)=>T(_,!r(_)),Je=(p,_,D,f,w)=>{_(r(D).english_name),f(r(D)),T(w,!1)},ze=B('<div class="px-4 py-1 text-center hover:bg-amber-400 cursor-pointer"> </div>'),Ue=B('<div class="absolute w-full z-50 bg-white mt-1 shadow"></div>'),Re=B('<div class="w-50 mx-auto relative"><div> </div> <div class="relative"><!></div></div>');function fe(p,_){let D=re(_,"value",12),f=xe(!1),w=re(_,"selected",12),P=re(_,"options",24,()=>[]);var $=Re(),m=H($);m.__click=[Ie,f];var Y=H(m,!0);S(m);var y=A(m,2),N=H(y);{var b=j=>{var g=Ue();me(g,5,P,ve,(k,E)=>{var M=ze();M.__click=[Je,w,E,D,f];var Q=H(M,!0);S(M),ne(()=>ae(Q,(r(E),Oe(()=>r(E).english_name)))),Z(k,M)}),S(g),Z(j,g)};Me(N,j=>{r(f)&&j(b)})}S(y),S($),ne(()=>{Se(m,1,`w-full px-4 py-2 border rounded text-center hover:cursor-pointer ${r(f)?"bg-amber-400":"bg-white"}`),ae(Y,w())}),Z(p,$)}we(["click"]);function Ve(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var de={exports:{}},Ze=de.exports,ye;function Be(){return ye||(ye=1,function(p,_){(function(D,f){p.exports=f()})(Ze,function(){var D=1e3,f=6e4,w=36e5,P="millisecond",$="second",m="minute",Y="hour",y="day",N="week",b="month",j="quarter",g="year",k="date",E="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,X={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(i){var n=["th","st","nd","rd"],e=i%100;return"["+i+(n[(e-20)%10]||n[e]||n[0])+"]"}},ie=function(i,n,e){var a=String(i);return!a||a.length>=n?i:""+Array(n+1-a.length).join(e)+i},se={s:ie,z:function(i){var n=-i.utcOffset(),e=Math.abs(n),a=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+ie(a,2,"0")+":"+ie(t,2,"0")},m:function i(n,e){if(n.date()<e.date())return-i(e,n);var a=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(a,b),o=e-t<0,s=n.clone().add(a+(o?-1:1),b);return+(-(a+(e-t)/(o?t-s:s-t))||0)},a:function(i){return i<0?Math.ceil(i)||0:Math.floor(i)},p:function(i){return{M:b,y:g,w:N,d:y,D:k,h:Y,m,s:$,ms:P,Q:j}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(i){return i===void 0}},W="en",I={};I[W]=X;var le="$isDayjsObject",oe=function(i){return i instanceof R||!(!i||!i[le])},ee=function i(n,e,a){var t;if(!n)return W;if(typeof n=="string"){var o=n.toLowerCase();I[o]&&(t=o),e&&(I[o]=e,t=o);var s=n.split("-");if(!t&&s.length>1)return i(s[0])}else{var c=n.name;I[c]=n,t=c}return!a&&t&&(W=t),t||!a&&W},v=function(i,n){if(oe(i))return i.clone();var e=typeof n=="object"?n:{};return e.date=i,e.args=arguments,new R(e)},l=se;l.l=ee,l.i=oe,l.w=function(i,n){return v(i,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var R=function(){function i(e){this.$L=ee(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[le]=!0}var n=i.prototype;return n.parse=function(e){this.$d=function(a){var t=a.date,o=a.utc;if(t===null)return new Date(NaN);if(l.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var s=t.match(M);if(s){var c=s[2]-1||0,h=(s[7]||"0").substring(0,3);return o?new Date(Date.UTC(s[1],c,s[3]||1,s[4]||0,s[5]||0,s[6]||0,h)):new Date(s[1],c,s[3]||1,s[4]||0,s[5]||0,s[6]||0,h)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return l},n.isValid=function(){return this.$d.toString()!==E},n.isSame=function(e,a){var t=v(e);return this.startOf(a)<=t&&t<=this.endOf(a)},n.isAfter=function(e,a){return v(e)<this.startOf(a)},n.isBefore=function(e,a){return this.endOf(a)<v(e)},n.$g=function(e,a,t){return l.u(e)?this[a]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,a){var t=this,o=!!l.u(a)||a,s=l.p(e),c=function(J,C){var V=l.w(t.$u?Date.UTC(t.$y,C,J):new Date(t.$y,C,J),t);return o?V:V.endOf(y)},h=function(J,C){return l.w(t.toDate()[J].apply(t.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(C)),t)},u=this.$W,d=this.$M,x=this.$D,O="set"+(this.$u?"UTC":"");switch(s){case g:return o?c(1,0):c(31,11);case b:return o?c(1,d):c(0,d+1);case N:var q=this.$locale().weekStart||0,G=(u<q?u+7:u)-q;return c(o?x-G:x+(6-G),d);case y:case k:return h(O+"Hours",0);case Y:return h(O+"Minutes",1);case m:return h(O+"Seconds",2);case $:return h(O+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,a){var t,o=l.p(e),s="set"+(this.$u?"UTC":""),c=(t={},t[y]=s+"Date",t[k]=s+"Date",t[b]=s+"Month",t[g]=s+"FullYear",t[Y]=s+"Hours",t[m]=s+"Minutes",t[$]=s+"Seconds",t[P]=s+"Milliseconds",t)[o],h=o===y?this.$D+(a-this.$W):a;if(o===b||o===g){var u=this.clone().set(k,1);u.$d[c](h),u.init(),this.$d=u.set(k,Math.min(this.$D,u.daysInMonth())).$d}else c&&this.$d[c](h);return this.init(),this},n.set=function(e,a){return this.clone().$set(e,a)},n.get=function(e){return this[l.p(e)]()},n.add=function(e,a){var t,o=this;e=Number(e);var s=l.p(a),c=function(d){var x=v(o);return l.w(x.date(x.date()+Math.round(d*e)),o)};if(s===b)return this.set(b,this.$M+e);if(s===g)return this.set(g,this.$y+e);if(s===y)return c(1);if(s===N)return c(7);var h=(t={},t[m]=f,t[Y]=w,t[$]=D,t)[s]||1,u=this.$d.getTime()+e*h;return l.w(u,this)},n.subtract=function(e,a){return this.add(-1*e,a)},n.format=function(e){var a=this,t=this.$locale();if(!this.isValid())return t.invalidDate||E;var o=e||"YYYY-MM-DDTHH:mm:ssZ",s=l.z(this),c=this.$H,h=this.$m,u=this.$M,d=t.weekdays,x=t.months,O=t.meridiem,q=function(C,V,ue,ce){return C&&(C[V]||C(a,o))||ue[V].slice(0,ce)},G=function(C){return l.s(c%12||12,C,"0")},J=O||function(C,V,ue){var ce=C<12?"AM":"PM";return ue?ce.toLowerCase():ce};return o.replace(Q,function(C,V){return V||function(ue){switch(ue){case"YY":return String(a.$y).slice(-2);case"YYYY":return l.s(a.$y,4,"0");case"M":return u+1;case"MM":return l.s(u+1,2,"0");case"MMM":return q(t.monthsShort,u,x,3);case"MMMM":return q(x,u);case"D":return a.$D;case"DD":return l.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return q(t.weekdaysMin,a.$W,d,2);case"ddd":return q(t.weekdaysShort,a.$W,d,3);case"dddd":return d[a.$W];case"H":return String(c);case"HH":return l.s(c,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return J(c,h,!0);case"A":return J(c,h,!1);case"m":return String(h);case"mm":return l.s(h,2,"0");case"s":return String(a.$s);case"ss":return l.s(a.$s,2,"0");case"SSS":return l.s(a.$ms,3,"0");case"Z":return s}return null}(C)||s.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,a,t){var o,s=this,c=l.p(a),h=v(e),u=(h.utcOffset()-this.utcOffset())*f,d=this-h,x=function(){return l.m(s,h)};switch(c){case g:o=x()/12;break;case b:o=x();break;case j:o=x()/3;break;case N:o=(d-u)/6048e5;break;case y:o=(d-u)/864e5;break;case Y:o=d/w;break;case m:o=d/f;break;case $:o=d/D;break;default:o=d}return t?o:l.a(o)},n.daysInMonth=function(){return this.endOf(b).$D},n.$locale=function(){return I[this.$L]},n.locale=function(e,a){if(!e)return this.$L;var t=this.clone(),o=ee(e,a,!0);return o&&(t.$L=o),t},n.clone=function(){return l.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},i}(),te=R.prototype;return v.prototype=te,[["$ms",P],["$s",$],["$m",m],["$H",Y],["$W",y],["$M",b],["$y",g],["$D",k]].forEach(function(i){te[i[1]]=function(n){return this.$g(n,i[0],i[1])}}),v.extend=function(i,n){return i.$i||(i(n,R,v),i.$i=!0),v},v.locale=ee,v.isDayjs=oe,v.unix=function(i){return v(1e3*i)},v.en=I[W],v.Ls=I,v.p={},v})}(de)),de.exports}var Qe=Be();const Ge=Ve(Qe);let z=Ge(),Ke=14,pe=21,he=10,Xe=z.hour()>=pe?z.add(1,"day"):z,De=[];for(let p=0;p<=Ke;p++)De.push(Xe.add(p,"day").format("D MMMM YYYY"));let U;z.hour()>=pe?U=z.add(1,"day").hour(he).minute(0).second(0):(U=z.minute()===0&&z.second()===0?z:z.add(1,"hour").startOf("hour"),U.hour()<he&&(U=U.hour(he).minute(0).second(0)));let ke=[];for(;U.hour()<=pe;)ke.push(U.format("h A")),U=U.add(1,"hour");let et="Date of visit",tt="Time of visit";var rt=B('<label class="- hover:cursor-pointer"><input type="radio" class="mt-2"/> </label>'),nt=B(`<div class="h-screen justify-center items-center flex"><form method="POST" class="bg-gradient-to-br from-[#7d1b1f] to-red-700
flex-center flex-col w-[75%] rounded-2xl outline-2 outline-white shadow-2xl shadow-cyan-800 p-2  md:w-1/3 "><div class=" text-xl font-semibold text-[#E8C6A0]">Consultation</div> <div class="flex flex-row space-x-10"></div> <div><label for="first_name" class="mb-2">Your name</label> <input type="text" id="first_name" placeholder="John" class="text-center" required/></div> <!> <!> <div class="text-[#E8C6A0] font-semibold text-xl">Standard Treatment</div> <!> <div class="text-[#E8C6A0] font-semibold text-xl">TCM Wellness Program</div> <!> <div class="text-[#E8C6A0] font-semibold text-xl">Packaged Treatment</div> <!> <div class="text-[#E8C6A0] font-semibold text-xl text-outline"> </div> <label for="additional">Additional request</label> <textarea id="additional" placeholder="I would like a tui na with the massage together please" class=" bg-white rounded flex mb-2 border-2 border-transparent focus:border-emerald-900 focus:outline-none focus:border-2 focus-within:bg-amber-400 font-semibold h-20 w-50"></textarea> <button type="submit" class=" bg-white hover:bg-green-400 px-10">Submit</button></form></div>`);function vt(p,_){Ce(_,!0);const D=[];let f=L(""),w=L(K($e.consultation[0])),P=L(""),$=L(""),m=[],Y=L(K([])),y=L(K({english_name:"",starting_price:"0"})),N=L(K([])),b=L(K({english_name:"",starting_price:"0"})),j=L(K([])),g=L(K({english_name:"",starting_price:"0"}));Te(async()=>{m=await(await fetch("http://localhost:3000/services")).json(),T(Y,m.filter(d=>d.category==="Standard Treatment"),!0),T(N,m.filter(d=>d.category==="TCM Wellness Program"),!0),T(j,m.filter(d=>d.category==="Package Price"),!0)});let k=F(()=>r(y).english_name),E=F(()=>Number(r(y).starting_price)),M=F(()=>r(b).english_name),Q=F(()=>Number(r(b).starting_price)),X=F(()=>r(g).english_name),ie=F(()=>Number(r(g).starting_price)),se=F(()=>r(w).price+r(E)+r(Q)+r(ie)),W=L(""),I=F(()=>`This is ${r(f)}, I would like to book a treatment at around $${r(se).toFixed(2)} on ${r(P)} at ${r($)}.
 The treatment I am looking for is / are ${r(k)?r(k):""}, ${r(M)?r(M):""},${r(X)?r(X):""},${r(W)?r(W):""}
 `),le=F(()=>({loyaltyPrice:Number(r(w).price),name:r(f),date:r(P),time:r($),treatments:[{english_name:r(k)},{english_name:r(M)},{english_name:r(X)}],extraComments:r(W),price:Number(r(se))})),oe=F(()=>JSON.stringify(r(le)));const ee=async u=>{if(u.preventDefault(),!r(P)||!r($)){alert("Please select an appointment date or time before submitting.");return}if(!r(k)&&!r(M)&&!r(X)){alert("Please select any treatment before submitting.");return}const O=(await(await fetch("http://localhost:3000/appointment/createAppointment",{method:"POST",headers:{"Content-Type":"application/json"},body:r(oe)})).json()).appointment._id;await Ne(`/booking/${O}`),window.open(`https://wa.me/6582881687?text=${r(I)}`,"_blank")};var v=nt(),l=H(v),R=A(H(l),2);me(R,21,()=>$e.consultation,ve,(u,d)=>{var x=rt(),O=H(x);ge(O);var q,G=A(O);S(x),ne(()=>{q!==(q=r(d))&&(O.value=(O.__value=r(d))??""),ae(G,` ${r(d).english_name??""}`)}),He(D,[],O,()=>(r(d),r(w)),J=>T(w,J)),Z(u,x)}),S(R);var te=A(R,2),i=A(H(te),2);ge(i),S(te);var n=A(te,2);be(n,{get options(){return De},get selected(){return et},get value(){return r(P)},set value(u){T(P,u,!0)}});var e=A(n,2);be(e,{get options(){return ke},get selected(){return tt},get value(){return r($)},set value(u){T($,u,!0)}});var a=A(e,4);fe(a,{get options(){return r(Y)},selected:"Select only if required",get value(){return r(y)},set value(u){T(y,u,!0)}});var t=A(a,4);fe(t,{get options(){return r(N)},selected:"Select only if required",get value(){return r(b)},set value(u){T(b,u,!0)}});var o=A(t,4);fe(o,{get options(){return r(j)},selected:"Select only if required",get value(){return r(g)},set value(u){T(g,u,!0)}});var s=A(o,2),c=H(s);S(s);var h=A(s,4);je(h),Ae(2),S(l),S(v),ne(u=>ae(c,`Cost Estimated: $${u??""}`),[()=>r(se).toFixed(2)]),Pe("submit",l,ee),_e(i,()=>r(f),u=>T(f,u)),_e(h,()=>r(W),u=>T(W,u)),Z(p,v),Ye()}export{vt as component};
