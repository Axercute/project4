import"../chunks/CWj6FrbW.js";import{p as O,f as j,V as k,i as e,b as y,c as q,s as p,d as o,r as i,n as J,l as u,h as m,t as N,e as P}from"../chunks/DGUbBfuZ.js";import{i as T}from"../chunks/EtgRPtOJ.js";import{r as _}from"../chunks/DuOWvoEr.js";import{b as S}from"../chunks/B1lP4TFf.js";import{g as $}from"../chunks/B0lz7bPj.js";const A="http://localhost:3000/users",B=async d=>{try{const t=await(await fetch(`${A}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();if(t.err)throw new Error(t.err);if(t.jwt)return localStorage.setItem("token",t.jwt),JSON.parse(atob(t.jwt.split(".")[1])).payload;throw new Error("Invalid response from server")}catch(s){throw console.log(s),new Error(s.message)}};var C=j("<p> </p>"),D=j('<main><form><div><label for="email">Email:</label> <input id="email" type="email" required/></div> <div><label for="password">Password:</label> <input id="password" type="password" required/></div> <div><button type="submit">Sign In</button></div></form> <!></main>');function G(d,s){O(s,!0);let t=u(""),c=u(""),n=u("");const E=async a=>{try{const r={email:e(t),password:e(c)},h=await B(r);m(n,"Successfully logged in"),$("/dashboard")}catch(r){m(n,r.message,!0)}};var v=D(),l=o(v),f=o(l),w=p(o(f),2);_(w),i(f);var b=p(f,2),g=p(o(b),2);_(g),i(b),J(2),i(l);var x=p(l,2);{var I=a=>{var r=C(),h=o(r,!0);i(r),N(()=>P(h,e(n))),y(a,r)};T(x,a=>{e(n)&&a(I)})}i(v),k("submit",l,E),S(w,()=>e(t),a=>m(t,a)),S(g,()=>e(c),a=>m(c,a)),y(d,v),q()}export{G as component};
