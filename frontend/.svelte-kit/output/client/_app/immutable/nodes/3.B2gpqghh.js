import"../chunks/Bzak7iHL.js";import{p as D,f as P,t as $,ao as z,x as s,C as g,b as A,c as F,s as i,d as r,y as G,e as n,r as a,B as l}from"../chunks/BEkSORZj.js";import{r as I}from"../chunks/C4tdoe33.js";import{b as O}from"../chunks/B6YnJckm.js";import{_ as H,g as K}from"../chunks/Z1p_42fb.js";import{g as L}from"../chunks/DDViNi8q.js";const M=async d=>{try{const t=await(await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();if(t.err)throw new Error(t.err);if(t.jwt)return localStorage.setItem("token",t.jwt),JSON.parse(atob(t.jwt.split(".")[1])).payload;throw new Error("Invalid response from server")}catch(o){throw console.log(o),new Error(o.message)}};var Q=P(`<div class="h-screen justify-center items-center flex"><form class="bg-gradient-to-br from-[#7d1b1f] to-red-700
flex-center flex-col w-[75%] rounded-2xl outline-2 outline-white shadow-2xl shadow-cyan-800 p-2  md:w-1/3 "><div class="text-white m-2 font-semibold text-center"> </div> <div><label for="email" class="text-white"> </label> <input id="email" type="email" required/></div> <div><label for="password" class="text-white"> </label> <input id="password" type="password" required/></div> <div><button class="text-black bg-white hover:bg-green-400" type="submit"> </button></div></form></div>`);function Z(d,o){D(o,!0);const t=G(()=>H(K("main")));let m=g(""),c=g(""),h=g("");const k=async()=>{try{const e={email:s(m),password:s(c)},E=await M(e);l(h,"Successfully logged in"),L("/dashboard")}catch(e){l(h,e.message,!0)}};var p=Q(),v=r(p),u=r(v),q=r(u,!0);a(u);var f=i(u,2),w=r(f),C=r(w,!0);a(w);var x=i(w,2);I(x),a(f);var b=i(f,2),_=r(b),J=r(_,!0);a(_);var y=i(_,2);I(y),a(b);var j=i(b,2),S=r(j),N=r(S,!0);a(S),a(j),a(v),a(p),$((e,E,T,B)=>{n(q,e),n(C,E),n(J,T),n(N,B)},[()=>s(t).t(15),()=>s(t).t(16),()=>s(t).t(17),()=>s(t).t(18)]),z("submit",v,k),O(x,()=>s(m),e=>l(m,e)),O(y,()=>s(c),e=>l(c,e)),A(d,p),F()}export{Z as component};
